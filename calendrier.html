<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©server ‚Äì Magic Box Events</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <style>
        :root {
            --gold: #C8963C;
            --dark: #1A1A14;
            --cream: #FDFBF8;
            --text: #2C2C22;
            --red: #C0392B;
            --green: #27AE60;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { background: var(--cream); color: var(--text); font-family: 'Jost', sans-serif; overflow-x: hidden; }

        /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 5%; background: rgba(253,251,248,0.95); backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(200,150,60,0.1);
        }
        .nav-logo { font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; font-weight: 600; text-decoration: none; color: var(--dark); }
        .nav-logo span { color: var(--gold); }
        .nav-tabs { display: flex; gap: 30px; list-style: none; }
        .nav-tabs a { text-decoration: none; color: var(--text); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 500; transition: 0.3s; }
        .nav-tabs a:hover { color: var(--gold); }

        /* ‚îÄ‚îÄ HAMBURGER ‚îÄ‚îÄ */
        .hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; padding: 5px; background: none; border: none; }
        .hamburger span { display: block; width: 25px; height: 2px; background: var(--dark); transition: 0.3s; }
        .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
        .hamburger.open span:nth-child(2) { opacity: 0; }
        .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }
        .mobile-menu { display: none; position: fixed; top: 75px; left: 0; right: 0; background: rgba(253,251,248,0.98); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(200,150,60,0.15); z-index: 999; padding: 20px 0; }
        .mobile-menu.open { display: block; }
        .mobile-menu a { display: block; padding: 14px 8%; text-decoration: none; color: var(--text); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 500; border-bottom: 1px solid rgba(200,150,60,0.08); transition: 0.3s; }
        .mobile-menu a:hover { color: var(--gold); }

        /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
        .page-header { padding: 140px 10% 60px; text-align: center; background: white; border-bottom: 1px solid rgba(200,150,60,0.15); }
        .page-tag { color: var(--gold); text-transform: uppercase; letter-spacing: 3px; font-size: 0.75rem; margin-bottom: 15px; display: block; }
        h1 { font-family: 'Cormorant Garamond', serif; font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 300; line-height: 1.1; }
        h1 em { color: var(--gold); font-style: italic; }
        .page-sub { margin-top: 15px; color: #5A5A48; font-weight: 300; font-size: 0.95rem; }

        /* ‚îÄ‚îÄ L√âGENDE ‚îÄ‚îÄ */
        .legend { display: flex; justify-content: center; gap: 30px; padding: 30px; flex-wrap: wrap; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.82rem; font-weight: 500; letter-spacing: 0.05em; }
        .legend-dot { width: 14px; height: 14px; border-radius: 50%; }

        /* ‚îÄ‚îÄ CALENDRIER ‚îÄ‚îÄ */
        .calendar-section { padding: 40px 5% 80px; max-width: 900px; margin: 0 auto; }
        .calendar-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .calendar-nav button { background: none; border: 1px solid rgba(200,150,60,0.3); color: var(--gold); padding: 8px 18px; cursor: pointer; font-family: 'Jost', sans-serif; font-size: 0.8rem; letter-spacing: 0.1em; transition: 0.3s; }
        .calendar-nav button:hover { background: var(--gold); color: white; }
        .calendar-month { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; font-weight: 300; color: var(--dark); text-transform: capitalize; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
        .day-header { text-align: center; font-size: 0.72rem; letter-spacing: 0.15em; text-transform: uppercase; color: #888; padding: 8px 0; font-weight: 600; }
        .day {
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            border-radius: 4px; font-size: 0.88rem; font-weight: 500;
            cursor: default; transition: 0.2s; position: relative;
        }
        .day.empty { background: transparent; }
        .day.past { color: #ccc; background: transparent; }
        .day.taken { background: rgba(192,57,43,0.1); color: var(--red); border: 1px solid rgba(192,57,43,0.2); }
        .day.taken::after { content: '‚úó'; font-size: 0.6rem; position: absolute; top: 3px; right: 4px; }
        .day.available { background: rgba(39,174,96,0.08); color: var(--green); border: 1px solid rgba(39,174,96,0.2); cursor: pointer; }
        .day.available:hover { background: var(--green); color: white; transform: scale(1.05); }
        .day.selected { background: var(--gold) !important; color: white !important; border-color: var(--gold) !important; transform: scale(1.05); }
        .day.today { font-weight: 700; }

        /* ‚îÄ‚îÄ SECTION CALENDLY ‚îÄ‚îÄ */
        .calendly-section {
            max-width: 900px; margin: 0 auto 80px;
            display: none; animation: fadeIn 0.4s ease;
        }
        .calendly-section.visible { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .calendly-header {
            background: white;
            border: 1px solid rgba(200,150,60,0.2);
            border-bottom: none;
            padding: 28px 40px 22px;
            display: flex; align-items: center;
            justify-content: space-between;
            flex-wrap: wrap; gap: 12px;
        }
        .calendly-header-left h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.7rem; font-weight: 300; margin-bottom: 4px;
        }
        .calendly-date-badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(200,150,60,0.1);
            border: 1px solid rgba(200,150,60,0.3);
            color: var(--gold); font-size: 0.78rem; font-weight: 600;
            letter-spacing: 0.12em; text-transform: uppercase;
            padding: 6px 14px; border-radius: 2px;
        }
        .calendly-change-btn {
            background: none; border: 1px solid rgba(200,150,60,0.3);
            color: var(--gold); padding: 8px 18px; cursor: pointer;
            font-family: 'Jost', sans-serif; font-size: 0.75rem;
            letter-spacing: 0.12em; text-transform: uppercase;
            transition: 0.3s; white-space: nowrap;
        }
        .calendly-change-btn:hover { background: var(--gold); color: white; }

        .calendly-widget-wrapper {
            background: white;
            border: 1px solid rgba(200,150,60,0.2);
            border-top: 3px solid var(--gold);
            overflow: hidden;
        }
        .calendly-inline-widget { min-width: 320px; height: 700px; }

        .calendly-loader {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 400px; gap: 16px;
            color: #888; font-size: 0.85rem; letter-spacing: 0.05em;
        }
        .loader-spinner {
            width: 36px; height: 36px;
            border: 2px solid rgba(200,150,60,0.2);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ‚îÄ‚îÄ NOTE ADMIN ‚îÄ‚îÄ */
        .admin-note {
            max-width: 900px; margin: 0 auto 40px;
            background: rgba(200,150,60,0.06);
            border: 1px dashed rgba(200,150,60,0.4);
            padding: 20px 25px;
            font-size: 0.82rem; color: #5A5A48; line-height: 1.8;
        }
        .admin-note strong { color: var(--gold); }
        .admin-note code { background: rgba(200,150,60,0.1); padding: 1px 5px; border-radius: 2px; font-size: 0.78rem; }

        /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
        footer { padding: 30px; text-align: center; background: #000; color: #555; font-size: 0.7rem; letter-spacing: 1px; }

        /* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
        @media (max-width: 768px) {
            nav { padding: 5px 4%; height: 75px; }
            .nav-tabs { display: none; }
            .hamburger { display: flex; }
            .btn-reserver { display: none; }
            .page-header { padding: 100px 6% 50px; }
            .calendar-section { padding: 30px 4% 60px; }
            .day { font-size: 0.78rem; }
            .calendly-section { margin: 0 4% 60px; }
            .calendly-header { padding: 20px; }
            .calendly-inline-widget { height: 750px; }
        }
    </style>
</head>
<body>

<!-- NAV -->
<nav>
    <a href="index.html" class="nav-logo"><span>Magic</span> Box Events</a>
    <ul class="nav-tabs">
        <li><a href="index.html">Accueil</a></li>
        <li><a href="video.html">La Magic Box en action</a></li>
        <li><a href="index.html#formules">Tarifs</a></li>
        <li><a href="calendrier.html" style="color:var(--gold)">R√©server</a></li>
    </ul>
    <a href="tel:0686011346" class="btn-reserver" style="background:var(--gold); color:white; padding:10px 15px; text-decoration:none; font-size:0.7rem; font-weight:600; letter-spacing:1px; border-radius:2px;">R√âSERVER</a>
    <button class="hamburger" id="hamburger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </button>
</nav>

<!-- MENU MOBILE -->
<div class="mobile-menu" id="mobileMenu">
    <a href="index.html" onclick="closeMenu()">Accueil</a>
    <a href="video.html" onclick="closeMenu()">La Magic Box en action</a>
    <a href="index.html#formules" onclick="closeMenu()">Tarifs</a>
    <a href="calendrier.html" onclick="closeMenu()" style="color:var(--gold);">üìÖ R√©server</a>
    <a href="tel:0686011346" style="color:var(--gold); font-weight:600;">üìû Appeler</a>
</div>

<!-- HEADER -->
<div class="page-header">
    <span class="page-tag">Disponibilit√©s</span>
    <h1>Choisissez votre<br><em>date</em></h1>
    <p class="page-sub">S√©lectionnez une date disponible, puis finalisez votre r√©servation via notre agenda en ligne</p>
</div>

<!-- L√âGENDE -->
<div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div> Disponible</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div> D√©j√† r√©serv√©</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--gold)"></div> Votre s√©lection</div>
</div>

<!-- CALENDRIER MAISON -->
<div class="calendar-section">
    <div class="calendar-nav">
        <button onclick="prevMonth()">‚Üê Pr√©c√©dent</button>
        <div class="calendar-month" id="monthTitle"></div>
        <button onclick="nextMonth()">Suivant ‚Üí</button>
    </div>
    <div class="calendar-grid" id="calendarGrid"></div>
</div>

<!-- NOTE ADMIN -->
<div class="admin-note">
    üí° <strong>Pour toi (admin) :</strong> Pour marquer une date comme r√©serv√©e, modifie le tableau <code>datesPrises</code> dans le JS en bas de page. Format : <strong>"YYYY-MM-DD"</strong>. Ex : <code>"2026-03-15"</code>
</div>

<!-- SECTION CALENDLY -->
<div class="calendly-section" id="calendlySection">

    <div class="calendly-header">
        <div class="calendly-header-left">
            <h2>Finalisez votre r√©servation</h2>
            <div class="calendly-date-badge" id="calendlyDateBadge">üìÖ ‚Äî</div>
        </div>
        <button class="calendly-change-btn" onclick="changeDate()">‚Üê Changer de date</button>
    </div>

    <div class="calendly-widget-wrapper">
        <div class="calendly-loader" id="calendlyLoader">
            <div class="loader-spinner"></div>
            <span>Chargement de l'agenda‚Ä¶</span>
        </div>
        <div class="calendly-inline-widget" id="calendlyWidget" style="display:none;"></div>
    </div>

</div>

<footer>¬© 2026 MAGIC BOX EVENTS ‚Äî Location Photobooth √éle-de-France</footer>

<!-- Calendly JS -->
<script src="https://assets.calendly.com/assets/external/widget.js" async></script>

<script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // üëâ LIEN CALENDLY
    const CALENDLY_URL = "https://calendly.com/contact-magicboxevents/new-meeting";

    // üëâ DATES D√âJ√Ä R√âSERV√âES (format "YYYY-MM-DD")
    const datesPrises = [
        "2026-02-28",
        "2026-03-07",
        "2026-03-14",
        "2026-03-21",
    ];
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    let currentDate = new Date();
    let selectedDate = null;

    const mois = ["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"];
    const jours = ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];

    function renderCalendar() {
        const grid = document.getElementById('calendarGrid');
        const title = document.getElementById('monthTitle');
        grid.innerHTML = '';

        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();
        title.textContent = mois[month] + ' ' + year;

        jours.forEach(j => {
            const h = document.createElement('div');
            h.className = 'day-header';
            h.textContent = j;
            grid.appendChild(h);
        });

        const firstDay = new Date(year, month, 1);
        let startDay = firstDay.getDay() - 1;
        if (startDay < 0) startDay = 6;

        for (let i = 0; i < startDay; i++) {
            const empty = document.createElement('div');
            empty.className = 'day empty';
            grid.appendChild(empty);
        }

        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const today = new Date();
        today.setHours(0,0,0,0);

        for (let d = 1; d <= daysInMonth; d++) {
            const dayEl = document.createElement('div');
            const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const thisDate = new Date(year, month, d);

            dayEl.textContent = d;
            dayEl.className = 'day';

            if (thisDate < today) {
                dayEl.classList.add('past');
            } else if (datesPrises.includes(dateStr)) {
                dayEl.classList.add('taken');
                dayEl.title = 'Date d√©j√† r√©serv√©e';
            } else {
                dayEl.classList.add('available');
                if (dateStr === selectedDate) dayEl.classList.add('selected');
                dayEl.onclick = () => selectDate(dateStr, d, month, year);
            }

            if (thisDate.toDateString() === today.toDateString()) dayEl.classList.add('today');
            grid.appendChild(dayEl);
        }
    }

    function selectDate(dateStr, d, month, year) {
        selectedDate = dateStr;
        renderCalendar();

        const section = document.getElementById('calendlySection');
        const badge   = document.getElementById('calendlyDateBadge');
        const widget  = document.getElementById('calendlyWidget');
        const loader  = document.getElementById('calendlyLoader');

        badge.textContent = 'üìÖ ' + d + ' ' + mois[month] + ' ' + year;
        section.classList.add('visible');

        widget.style.display = 'none';
        widget.innerHTML = '';
        loader.style.display = 'flex';

        setTimeout(() => {
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);

        waitForCalendly(() => {
            widget.style.display = 'block';
            loader.style.display = 'none';

            const url = `${CALENDLY_URL}?month=${dateStr.substring(0,7)}&date=${dateStr}&hide_landing_page_details=1&hide_gdpr_banner=1&primary_color=C8963C&text_color=2C2C22&background_color=FDFBF8`;

            Calendly.initInlineWidget({
                url: url,
                parentElement: widget,
                prefill: {},
                utm: {}
            });
        });
    }

    function waitForCalendly(callback) {
        if (typeof Calendly !== 'undefined') {
            callback();
        } else {
            setTimeout(() => waitForCalendly(callback), 100);
        }
    }

    function changeDate() {
        selectedDate = null;
        renderCalendar();
        const section = document.getElementById('calendlySection');
        const widget  = document.getElementById('calendlyWidget');
        section.classList.remove('visible');
        widget.innerHTML = '';
        document.querySelector('.calendar-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function prevMonth() {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
    }
    function nextMonth() {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
    }

    function toggleMenu() {
        document.getElementById('hamburger').classList.toggle('open');
        document.getElementById('mobileMenu').classList.toggle('open');
    }
    function closeMenu() {
        document.getElementById('hamburger').classList.remove('open');
        document.getElementById('mobileMenu').classList.remove('open');
    }

    renderCalendar();
</script>
</body>
</html>
